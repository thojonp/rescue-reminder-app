<div class="reset-container">
  <div class="reset-card">
    <div class="reset-header">
      <!-- Swissgliders Logo -->
      <div style="margin-bottom: 24px; display: flex; justify-content: center;">
        <img src="/assets/swissgliders-logo.png" alt="Swissgliders Logo" style="width: 100px; height: 100px;">
      </div>
      
      <h1>üîê Passwort zur√ºcksetzen</h1>
      <p>Geben Sie Ihr neues Passwort ein</p>
    </div>

    @if (!tokenValid) {
      <div class="alert alert-error">
        {{ errorMessage }}
      </div>
      <div style="text-align: center; margin-top: 20px;">
        <button (click)="goToLogin()" class="btn-primary">
          Zur√ºck zum Login
        </button>
      </div>
    } @else {
      @if (successMessage) {
        <div class="alert alert-success">
          {{ successMessage }}
        </div>
      }

      @if (errorMessage && !successMessage) {
        <div class="alert alert-error">
          {{ errorMessage }}
        </div>
      }

      @if (!successMessage) {
        <form (ngSubmit)="onSubmit()" #resetForm="ngForm">
          <div class="form-group">
            <label for="newPassword">Neues Passwort *</label>
            <input
              type="password"
              id="newPassword"
              name="newPassword"
              [(ngModel)]="newPassword"
              required
              minlength="6"
              #password="ngModel"
              class="form-control"
              placeholder="Mindestens 6 Zeichen"
              [disabled]="isLoading"
            />
            @if (password.invalid && password.touched) {
              <div class="error-text">Passwort muss mindestens 6 Zeichen lang sein</div>
            }
          </div>

          <div class="form-group">
            <label for="confirmPassword">Passwort best√§tigen *</label>
            <input
              type="password"
              id="confirmPassword"
              name="confirmPassword"
              [(ngModel)]="confirmPassword"
              required
              #confirmPass="ngModel"
              class="form-control"
              placeholder="Passwort wiederholen"
              [disabled]="isLoading"
            />
            @if (confirmPass.touched && newPassword !== confirmPassword) {
              <div class="error-text">Passw√∂rter stimmen nicht √ºberein</div>
            }
          </div>

          <button 
            type="submit" 
            [disabled]="resetForm.invalid || isLoading || newPassword !== confirmPassword"
            class="btn-primary btn-block"
          >
            @if (isLoading) {
              <span>Wird gespeichert...</span>
            } @else {
              <span>Passwort √§ndern</span>
            }
          </button>
        </form>

        <div class="reset-footer">
          <p><a routerLink="/login">Zur√ºck zum Login</a></p>
        </div>
      }
    }
  </div>
</div>